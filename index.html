<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <title>Irregular Verbs Trainer PRO</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="stylesheet" href="style.css" />
</head>
<body class="theme-dark">
  <button id="theme-toggle" class="theme-toggle" aria-label="Basculer le thÃ¨me">â˜€ï¸</button>

  <div id="home" class="container">
    <h1>Irregular Verbs Trainer</h1>
    <p class="subtitle">MaÃ®trise les verbes irrÃ©guliers anglais avec diffÃ©rents modes de jeu.</p>
    <button class="primary-btn large" onclick="goToMenu()">ğŸš€ Commencer</button>
  </div>

  <div id="menu" class="container hidden">
    <h1>Choisis ton mode</h1>
    <p class="subtitle">Puis sÃ©lectionne la difficultÃ© et le nombre de questions.</p>

    <div class="mode-grid">
      <div class="mode-card" onclick="selectMode('classic', this)">
        <div class="mode-icon">ğŸ“˜</div>
        <div class="mode-title">Classique</div>
        <div class="mode-desc">Choisis past + participle parmi 3 options.</div>
      </div>
      <div class="mode-card" onclick="selectMode('qcm', this)">
        <div class="mode-icon">ğŸ“</div>
        <div class="mode-title">QCM</div>
        <div class="mode-desc">2 Ã©tapes : past puis participle.</div>
      </div>
      <div class="mode-card" onclick="selectMode('learning', this)">
        <div class="mode-icon">ğŸ”</div>
        <div class="mode-title">Apprentissage</div>
        <div class="mode-desc">Repose les verbes ratÃ©s jusquâ€™Ã  maÃ®trise.</div>
      </div>
      <div class="mode-card" onclick="selectMode('exam', this)">
        <div class="mode-icon">â±ï¸</div>
        <div class="mode-title">Examen</div>
        <div class="mode-desc">Chrono + note finale.</div>
      </div>
      <div class="mode-card" onclick="selectMode('puzzle', this)">
        <div class="mode-icon">ğŸ§©</div>
        <div class="mode-title">Puzzle</div>
        <div class="mode-desc">Place chaque forme au bon endroit.</div>
      </div>
      <div class="mode-card" onclick="selectMode('duel', this)">
        <div class="mode-icon">âš”ï¸</div>
        <div class="mode-title">Duel</div>
        <div class="mode-desc">2 joueurs, meilleur score gagne.</div>
      </div>
      <div class="mode-card" onclick="selectMode('flashcards', this)">
        <div class="mode-icon">ğŸ´</div>
        <div class="mode-title">Flashcards</div>
        <div class="mode-desc">Retourne la carte, auto-Ã©value-toi.</div>
      </div>
    </div>

    <h2 class="section-title">DifficultÃ©</h2>
    <div class="difficulty-buttons">
      <button onclick="setDifficulty(1, this)">â­ Niveau 1</button>
      <button onclick="setDifficulty(2, this)">â­â­ Niveau 2</button>
      <button onclick="setDifficulty(3, this)">â­â­â­ Niveau 3</button>
    </div>

    <h2 class="section-title">Nombre de questions</h2>
    <div class="question-buttons">
      <button onclick="selectQuestionCount(5, this)">5</button>
      <button onclick="selectQuestionCount(10, this)">10</button>
      <button onclick="selectQuestionCount(15, this)">15</button>
      <button onclick="selectQuestionCount(20, this)">20</button>
    </div>

    <button class="danger-btn" onclick="backHome()">â¬… Retour</button>
  </div>

  <div id="game" class="container hidden">
    <h1 id="game-title">Modeâ€¦</h1>
    <div class="top-infos">
      <div id="question-counter"></div>
      <div id="timer"></div>
    </div>
    <div id="duel-players" class="duel-players hidden">
      <div id="player1-card" class="duel-player-card">
        <div class="duel-player-name">Joueur 1</div>
        <div class="duel-player-score" id="player1-score">0</div>
      </div>
      <div id="player2-card" class="duel-player-card">
        <div class="duel-player-name">Joueur 2</div>
        <div class="duel-player-score" id="player2-score">0</div>
      </div>
    </div>
    <div id="duel-info"></div>

    <div id="word-wrapper">
      <div id="word">...</div>
      <div id="audio-controls">
        <button id="audio-verb-btn" class="icon-btn" type="button">ğŸ”Š Prononciation</button>
      </div>
    </div>

    <button id="toggle-translation" class="secondary-btn" type="button">
      ğŸ“˜ Voir la traduction
    </button>
    <div id="translation"></div>

    <div id="step-label" class="step-label"></div>

    <div id="btn-group" class="btn-group"></div>

    <div id="puzzle-area"></div>

    <div id="feedback"></div>

    <button id="next" class="primary-btn" onclick="nextQuestion()">Suivant âœ</button>
  </div>

  <div id="result" class="container hidden">
    <h1>RÃ©sultat</h1>
    <h2 id="score-text"></h2>
    <div id="badge-row" class="badge-row"></div>
    <div id="summary"></div>
    <div id="mistake-list"></div>

    <div id="qr-section" class="qr-section hidden">
      <h2>QR Ã  montrer Ã  ton professeur</h2>
      <p class="subtitle small">Il contient ton prÃ©nom, ta classe et tes rÃ©sultats sur chaque exercice rÃ©alisÃ©.</p>
      <div id="qrBox"></div>
      <button id="download-qr-btn" class="secondary-btn" type="button">ğŸ“¥ TÃ©lÃ©charger le QR</button>
    </div>

    <button class="primary-btn" onclick="restart()">ğŸ” Rejouer</button>
  </div>

  <!-- Modale identitÃ© Ã©lÃ¨ve -->
  <div id="identity-modal" class="modal hidden" aria-hidden="true">
    <div class="modal-backdrop"></div>
    <div class="modal-content">
      <h2>Bienvenue ğŸ‘‹</h2>
      <p class="subtitle small">Indique ton prÃ©nom et ta classe pour que le QR code soit lisible par ton professeur.</p>
      <div class="modal-field">
        <label for="student-firstname">PrÃ©nom</label>
        <input id="student-firstname" type="text" autocomplete="given-name" />
      </div>
      <div class="modal-field">
        <label for="student-class">Classe (ex : 4B, 3C)</label>
        <input id="student-class" type="text" autocomplete="off" />
      </div>
      <button class="primary-btn" type="button" onclick="saveIdentity()">Valider</button>
    </div>
  </div>

  <!-- Modale fin de sÃ©ance -->
  <div id="session-modal" class="modal hidden" aria-hidden="true">
    <div class="modal-backdrop"></div>
    <div class="modal-content">
      <h2>Fin de l'exercice</h2>
      <p class="subtitle small">
        Veux-tu continuer avec un autre mode / un autre nombre de questions, ou terminer et gÃ©nÃ©rer le QR code pour ton professeur ?
      </p>
      <div class="modal-actions">
        <button id="session-continue-btn" class="secondary-btn" type="button">Continuer un autre exercice</button>
        <button id="session-qr-btn" class="primary-btn" type="button">Terminer et gÃ©nÃ©rer le QR</button>
      </div>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/qrcode@1.5.3/build/qrcode.min.js"></script>
  <script src="script.js"></script>
</body>
</html>
